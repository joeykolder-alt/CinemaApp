<!DOCTYPE html>
<html lang="ar-u-nu-latn" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÙŠÙ†Ù…Ø§ - Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¬Ø²</title>
    <style>
        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø¨Ø³ÙŠØ·Ø© */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #c91010;
            text-align: center;
            margin-bottom: 30px;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 5px;
        }

        .section h2 {
            color: #333;
            border-bottom: 2px solid #c91010;
            padding-bottom: 10px;
        }

        input,
        button,
        select {
            padding: 10px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        button {
            background-color: #c91010;
            color: white;
            cursor: pointer;
            font-weight: bold;
        }

        button:hover {
            background-color: #a00;
        }

        .room-list,
        .movie-list,
        .show-list {
            margin-top: 15px;
        }

        .item {
            background: white;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
        }

        .seats-grid {
            display: grid;
            grid-template-columns: repeat(10, 40px);
            gap: 5px;
            margin: 20px 0;
        }

        .seat {
            aspect-ratio: 1;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .seat.available {
            background: #4CAF50;
            border: 2px solid #45a049;
        }

        .seat.available:hover {
            background: #45a049;
            transform: scale(1.1);
        }

        .seat.booked {
            background: #c91010;
            border: 2px solid #a00;
            cursor: not-allowed;
        }

        .marathon-result {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
        }

        .error {
            color: #c91010;
            font-weight: bold;
        }

        .success {
            color: #4CAF50;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸ¬ Ù†Ø¸Ø§Ù… Ø­Ø¬Ø² ØªØ°Ø§ÙƒØ± Ø§Ù„Ø³ÙŠÙ†Ù…Ø§</h1>

        <!-- Ù‚Ø³Ù… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‚Ø§Ø¹Ø§Øª -->
        <div class="section">
            <h2>Ø¥Ø¶Ø§ÙØ© Ù‚Ø§Ø¹Ø©</h2>
            <input type="text" id="roomName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù‚Ø§Ø¹Ø©">
            <input type="number" id="roomCapacity" placeholder="Ø§Ù„Ø³Ø¹Ø©" min="1">
            <button onclick="addRoom()">Ø¥Ø¶Ø§ÙØ© Ù‚Ø§Ø¹Ø©</button>
            <div class="room-list" id="roomsList"></div>
        </div>

        <!-- Ù‚Ø³Ù… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£ÙÙ„Ø§Ù… -->
        <div class="section">
            <h2>Ø¥Ø¶Ø§ÙØ© ÙÙŠÙ„Ù…</h2>
            <input type="text" id="movieTitle" placeholder="Ø§Ø³Ù… Ø§Ù„ÙÙŠÙ„Ù…">
            <input type="time" id="movieDuration" placeholder="Ø§Ù„Ù…Ø¯Ø©">
            <button onclick="addMovie()">Ø¥Ø¶Ø§ÙØ© ÙÙŠÙ„Ù…</button>
            <div class="movie-list" id="moviesList"></div>
        </div>

        <!-- Ù‚Ø³Ù… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø±ÙˆØ¶ -->
        <div class="section">
            <h2>Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶</h2>
            <select id="showMovie">
                <option value="">Ø§Ø®ØªØ± ÙÙŠÙ„Ù…</option>
            </select>
            <select id="showRoom">
                <option value="">Ø§Ø®ØªØ± Ù‚Ø§Ø¹Ø©</option>
            </select>
            <input type="datetime-local" id="showTime">
            <input type="number" id="showPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±" step="0.01">
            <button onclick="addShow()">Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶</button>
        </div>

        <!-- Ù‚Ø³Ù… Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ø±ÙˆØ¶ -->
        <div class="section">
            <h2>Ø¹Ø±ÙˆØ¶ Ø§Ù„ÙŠÙˆÙ…</h2>
            <input type="date" id="showDate">
            <button onclick="listShows()">Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ø±ÙˆØ¶</button>
            <div class="show-list" id="showsList"></div>
        </div>

        <!-- Ù‚Ø³Ù… Ø­Ø¬Ø² Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ -->
        <div class="section">
            <h2>Ø­Ø¬Ø² Ù…Ù‚Ø§Ø¹Ø¯</h2>
            <select id="bookShowId">
                <option value="">Ø§Ø®ØªØ± Ø¹Ø±Ø¶</option>
            </select>
            <button onclick="showSeats()">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯</button>
            <div id="seatsArea"></div>
        </div>

    </div>

    <script>
        // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© - Ø¨Ø³ÙŠØ· Ø¬Ø¯Ø§Ù‹!
        var rooms = []; // Ù…ØµÙÙˆÙØ© Ø§Ù„Ù‚Ø§Ø¹Ø§Øª
        var movies = []; // Ù…ØµÙÙˆÙØ© Ø§Ù„Ø£ÙÙ„Ø§Ù…
        var shows = []; // Ù…ØµÙÙˆÙØ© Ø§Ù„Ø¹Ø±ÙˆØ¶
        var selectedSeats = []; // Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©

        // Ø¯Ø§Ù„Ø© Ø¥Ø¶Ø§ÙØ© Ù‚Ø§Ø¹Ø©
        function addRoom() {
            var name = document.getElementById('roomName').value;
            var capacity = document.getElementById('roomCapacity').value;

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
            if (!name || !capacity) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
                return;
            }

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‚Ø§Ø¹Ø©
            var room = {
                name: name,
                capacity: parseInt(capacity)
            };
            rooms.push(room);

            // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('roomName').value = '';
            document.getElementById('roomCapacity').value = '';

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
            updateRoomsList();
            updateRoomsDropdown();

            alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‚Ø§Ø¹Ø© Ø¨Ù†Ø¬Ø§Ø­!');
        }

        // Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ø§Ø¹Ø§Øª
        function updateRoomsList() {
            var html = '<h3>Ø§Ù„Ù‚Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ©:</h3>';
            for (var i = 0; i < rooms.length; i++) {
                html += '<div class="item">Ø§Ù„Ù‚Ø§Ø¹Ø©: ' + rooms[i].name + ' - Ø§Ù„Ø³Ø¹Ø©: ' + rooms[i].capacity + ' Ù…Ù‚Ø¹Ø¯</div>';
            }
            document.getElementById('roomsList').innerHTML = html;
        }

        // Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø©
        function updateRoomsDropdown() {
            var select = document.getElementById('showRoom');
            select.innerHTML = '<option value="">Ø§Ø®ØªØ± Ù‚Ø§Ø¹Ø©</option>';
            for (var i = 0; i < rooms.length; i++) {
                select.innerHTML += '<option value="' + i + '">' + rooms[i].name + '</option>';
            }
        }

        // Ø¯Ø§Ù„Ø© Ø¥Ø¶Ø§ÙØ© ÙÙŠÙ„Ù…
        function addMovie() {
            var title = document.getElementById('movieTitle').value;
            var duration = document.getElementById('movieDuration').value;

            if (!title || !duration) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
                return;
            }

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙÙŠÙ„Ù…
            var movie = {
                title: title,
                duration: duration
            };
            movies.push(movie);

            // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('movieTitle').value = '';
            document.getElementById('movieDuration').value = '';

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…
            updateMoviesList();
            updateMoviesDropdown();

            alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙÙŠÙ„Ù… Ø¨Ù†Ø¬Ø§Ø­!');
        }

        // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ÙÙ„Ø§Ù…
        function updateMoviesList() {
            var html = '<h3>Ø§Ù„Ø£ÙÙ„Ø§Ù… Ø§Ù„Ù…Ø¶Ø§ÙØ©:</h3>';
            for (var i = 0; i < movies.length; i++) {
                html += '<div class="item">Ø§Ù„ÙÙŠÙ„Ù…: ' + movies[i].title + ' - Ø§Ù„Ù…Ø¯Ø©: ' + movies[i].duration + '</div>';
            }
            document.getElementById('moviesList').innerHTML = html;
        }

        // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ÙÙ„Ø§Ù… Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø©
        function updateMoviesDropdown() {
            var select = document.getElementById('showMovie');
            select.innerHTML = '<option value="">Ø§Ø®ØªØ± ÙÙŠÙ„Ù…</option>';
            for (var i = 0; i < movies.length; i++) {
                select.innerHTML += '<option value="' + i + '">' + movies[i].title + '</option>';
            }
        }

        // Ø¯Ø§Ù„Ø© Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶
        function addShow() {
            var movieIndex = document.getElementById('showMovie').value;
            var roomIndex = document.getElementById('showRoom').value;
            var time = document.getElementById('showTime').value;
            var price = document.getElementById('showPrice').value;

            if (!movieIndex || !roomIndex || !time || !price) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
                return;
            }

            // Ø­Ø³Ø§Ø¨ ÙˆÙ‚Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
            var startTime = new Date(time);
            var movieDuration = movies[movieIndex].duration.split(':');
            var hours = parseInt(movieDuration[0]);
            var minutes = parseInt(movieDuration[1]);
            var endTime = new Date(startTime.getTime() + (hours * 60 + minutes) * 60000);

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø±Ø¶
            var show = {
                id: shows.length + 1,
                movie: movies[movieIndex],
                room: rooms[roomIndex],
                start: startTime,
                end: endTime,
                price: parseFloat(price),
                bookedSeats: [] // Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø¬ÙˆØ²Ø©
            };
            shows.push(show);

            // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('showMovie').value = '';
            document.getElementById('showRoom').value = '';
            document.getElementById('showTime').value = '';
            document.getElementById('showPrice').value = '';

            updateShowsDropdown();

            alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø±Ø¶ Ø¨Ù†Ø¬Ø§Ø­!');
        }

        // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø©
        function updateShowsDropdown() {
            var select = document.getElementById('bookShowId');
            select.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø¹Ø±Ø¶</option>';
            for (var i = 0; i < shows.length; i++) {
                select.innerHTML += '<option value="' + i + '">Ø¹Ø±Ø¶ ' + shows[i].id + ': ' + shows[i].movie.title + '</option>';
            }
        }

        // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø¹Ø±ÙˆØ¶ ÙŠÙˆÙ… Ù…Ø¹ÙŠÙ†
        function listShows() {
            var date = document.getElementById('showDate').value;
            if (!date) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØªØ§Ø±ÙŠØ®');
                return;
            }

            var selectedDate = new Date(date);
            var html = '<h3>Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…ØªØ§Ø­Ø©:</h3>';
            var found = false;

            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¹Ø±ÙˆØ¶
            for (var i = 0; i < shows.length; i++) {
                var showDate = new Date(shows[i].start);
                if (showDate.toDateString() === selectedDate.toDateString()) {
                    found = true;
                    var startTime = showDate.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
                    var endTime = new Date(shows[i].end).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
                    html += '<div class="item">';
                    html += '<strong>Ø¹Ø±Ø¶ Ø±Ù‚Ù… ' + shows[i].id + '</strong><br>';
                    html += 'Ø§Ù„ÙÙŠÙ„Ù…: ' + shows[i].movie.title + '<br>';
                    html += 'Ø§Ù„Ù‚Ø§Ø¹Ø©: ' + shows[i].room.name + '<br>';
                    html += 'Ø§Ù„ÙˆÙ‚Øª: Ù…Ù† ' + startTime + ' Ø¥Ù„Ù‰ ' + endTime + '<br>';
                    html += 'Ø§Ù„Ø³Ø¹Ø±: ' + shows[i].price + ' Ø¯ÙŠÙ†Ø§Ø±<br>';
                    html += 'Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø¬ÙˆØ²Ø©: ' + shows[i].bookedSeats.length + '/' + shows[i].room.capacity;
                    html += '</div>';
                }
            }

            if (!found) {
                html += '<p class="error">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ø±ÙˆØ¶ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…</p>';
            }

            document.getElementById('showsList').innerHTML = html;
        }

        // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯
        function showSeats() {
            var showIndex = document.getElementById('bookShowId').value;
            if (!showIndex) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø±Ø¶');
                return;
            }

            selectedSeats = []; // ØªÙØ±ÙŠØº Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
            var show = shows[showIndex];
            var capacity = show.room.capacity;

            var html = '<h3>Ø§Ø®ØªØ± Ù…Ù‚Ø§Ø¹Ø¯Ùƒ (Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù‚Ø¹Ø¯ Ù„Ø­Ø¬Ø²Ù‡):</h3>';
            html += '<p>Ø§Ù„Ø£Ø®Ø¶Ø± = Ù…ØªØ§Ø­ | Ø§Ù„Ø£Ø­Ù…Ø± = Ù…Ø­Ø¬ÙˆØ²</p>';
            html += '<div class="seats-grid">';

            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯
            for (var i = 1; i <= capacity; i++) {
                var isBooked = show.bookedSeats.includes(i);
                var className = 'seat ' + (isBooked ? 'booked' : 'available');
                html += '<div class="' + className + '" onclick="bookSeat(' + i + ', ' + showIndex + ')">' + i + '</div>';
            }

            html += '</div>';
            document.getElementById('seatsArea').innerHTML = html;
        }

        // Ø¯Ø§Ù„Ø© Ø­Ø¬Ø² Ù…Ù‚Ø¹Ø¯ Ù…Ø¨Ø§Ø´Ø±Ø©
        function bookSeat(seatNum, showIndex) {
            var show = shows[showIndex];

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ù‚Ø¹Ø¯ Ù…Ø­Ø¬ÙˆØ² Ø£Ù… Ù„Ø§
            if (show.bookedSeats.includes(seatNum)) {
                alert('Ù‡Ø°Ø§ Ø§Ù„Ù…Ù‚Ø¹Ø¯ Ù…Ø­Ø¬ÙˆØ² Ø¨Ø§Ù„ÙØ¹Ù„!');
                return;
            }

            // Ø­Ø¬Ø² Ø§Ù„Ù…Ù‚Ø¹Ø¯ Ù…Ø¨Ø§Ø´Ø±Ø©
            show.bookedSeats.push(seatNum);

            alert('ØªÙ… Ø­Ø¬Ø² Ø§Ù„Ù…Ù‚Ø¹Ø¯ Ø±Ù‚Ù… ' + seatNum + ' Ø¨Ù†Ø¬Ø§Ø­!\nØ§Ù„Ø³Ø¹Ø±: ' + show.price + ' Ø¯ÙŠÙ†Ø§Ø±');

            // Ø¥Ø¹Ø§Ø¯Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯
            showSeats();
        }
    </script>
</body>

</html>